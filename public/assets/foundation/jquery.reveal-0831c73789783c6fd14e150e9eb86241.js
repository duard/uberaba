/*
 * jQuery Reveal Plugin 1.0
 * www.ZURB.com
 * Copyright 2010, ZURB
 * Free to use under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
*/
/*globals jQuery */
(function(e){e("a[data-reveal-id]").live("click",function(t){t.preventDefault();var n=e(this).attr("data-reveal-id");e("#"+n).reveal(e(this).data())}),e.fn.reveal=function(t){var n={animation:"fadeAndPop",animationSpeed:300,closeOnBackgroundClick:!0,dismissModalClass:"close-reveal-modal",open:e.noop,opened:e.noop,close:e.noop,closed:e.noop};return t=e.extend({},n,t),this.each(function(){function a(){s=!1}function f(){s=!0}function l(){s||(f(),t.animation==="fadeAndPop"&&(n.css({top:e(document).scrollTop()-i,opacity:0,visibility:"visible"}),o.fadeIn(t.animationSpeed/2),n.delay(t.animationSpeed/2).animate({top:e(document).scrollTop()+r+"px",opacity:1},t.animationSpeed,function(){n.trigger("reveal:opened")})),t.animation==="fade"&&(n.css({opacity:0,visibility:"visible",top:e(document).scrollTop()+r}),o.fadeIn(t.animationSpeed/2),n.delay(t.animationSpeed/2).animate({opacity:1},t.animationSpeed,function(){n.trigger("reveal:opened")})),t.animation==="none"&&(n.css({visibility:"visible",top:e(document).scrollTop()+r}),o.css({display:"block"}),n.trigger("reveal:opened")))}function c(){s||(f(),t.animation==="fadeAndPop"&&(n.animate({top:e(document).scrollTop()-i+"px",opacity:0},t.animationSpeed/2,function(){n.css({top:r,opacity:1,visibility:"hidden"})}),o.delay(t.animationSpeed).fadeOut(t.animationSpeed,function(){n.trigger("reveal:closed")})),t.animation==="fade"&&(n.animate({opacity:0},t.animationSpeed,function(){n.css({opacity:1,visibility:"hidden",top:r})}),o.delay(t.animationSpeed).fadeOut(t.animationSpeed,function(){n.trigger("reveal:closed")})),t.animation==="none"&&(n.css({visibility:"hidden",top:r}),o.css({display:"none"}),n.trigger("reveal:closed")))}function h(){n.unbind(".reveal"),o.unbind(".reveal"),e("."+t.dismissModalClass).unbind(".reveal"),e("body").unbind(".reveal")}var n=e(this),r=parseInt(n.css("top"),10),i=n.height()+r,s=!1,o=e(".reveal-modal-bg"),u;o.length===0&&(o=e('<div class="reveal-modal-bg" />').insertAfter(n),o.fadeTo("fast",.8)),n.bind("reveal:open.reveal",l),n.bind("reveal:close.reveal",c),n.bind("reveal:opened.reveal reveal:closed.reveal",a),n.bind("reveal:closed.reveal",h),n.bind("reveal:open.reveal",t.open),n.bind("reveal:opened.reveal",t.opened),n.bind("reveal:close.reveal",t.close),n.bind("reveal:closed.reveal",t.closed),n.trigger("reveal:open"),u=e("."+t.dismissModalClass).bind("click.reveal",function(){n.trigger("reveal:close")}),t.closeOnBackgroundClick&&(o.css({cursor:"pointer"}),o.bind("click.reveal",function(){n.trigger("reveal:close")})),e("body").bind("keyup.reveal",function(e){e.which===27&&n.trigger("reveal:close")})})}})(jQuery);